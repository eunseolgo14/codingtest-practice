# 다리를 지나는 트럭

**작성일**: 2025-10-03
**목표**: 시뮬레이션 문제에서 큐 활용 및 시간 흐름 제어를 정확히 구현하기

---

## 최초 제출(MySubmit.java) 시 틀린 부분
1. **시간 흐름 처리 오류**
   - 트럭이 다리에 오를 때 `expectedEnd += length` 식으로만 처리
   - 여러 트럭이 동시에 다리 위에 존재할 수 있는 상황이 반영되지 않음
   - 실제 문제는 “1초마다 한 칸씩 이동”을 반영해야 하는데, 단순 누적 방식으로는 반례 발생

2. **큐 동작 혼동**
   - `element()` 사용 → 실제로는 단순 조회(peek)라서 트럭이 빠지지 않음
   - 다리에서 트럭이 내려가는 로직이 누락되어 무한 루프/시간 계산 오류 발생
   - java에서는 `enque, deque` => `add, poll`

3. **다리 길이 처리 미흡**
    - 트럭이 다리를 다 건널 때까지 `bridge_length`초가 필요하다는 점을 “시간 += 다리 길이”로만 처리
    - 큐로 매 초를 시뮬레이션해야 트럭이 나가고 새로운 트럭이 들어오는 과정이 정확히 구현됨

---

## 2차 제출(MySolution.java) 시 수정한 부분
- `while` 루프 조건을 `truckIndex < truck_weights.length || currentWeight > 0`로 설정
- → 트럭이 모두 진입했더라도 다리 위에 남아있을 수 있음을 반영  
- `bridgeQueue`를 만들어 다리 상태를 큐로 모델링
    - 매 초마다 `timeCount++`
    - 다리가 꽉 찼을 때 `poll()`로 맨 앞 칸을 제거 → `currentWeight`에서 차 무게 차감
    - 조건 만족 시 트럭 진입 (`add(truck_weights[truckIndex])`)
    - 조건 불만족 시 `add(0)`으로 빈 칸 채움
- `element()` 대신 `poll()`을 사용하여 실제 트럭 `dequeue`가 일어나도록 수정

---

## 헷갈렸던 것/ 새로 배운 것
- 자바에서 큐 메서드 차이
    - `add()` → 삽입
    - `poll()` → 꺼내고 제거 (비어있으면 null)
    - `peek()` → 조회만 (비어있으면 null)
    - `element()` → 조회만 (비어있으면 예외 발생)  
- 시뮬레이션에서는 “빈 칸(0)”을 넣는 방식이 핵심
- → 무게는 안 늘어나지만 다리의 한 칸을 채워야 시간 흐름이 유지됨
- 종료 조건을 모든 트럭 진입 완료 + 다리 위 무게 0으로 설정해야 한다는 점
---

## 기억할 포인트
- 시뮬레이션 문제는 ‘한 초 단위’로 상태 변화를 그대로 구현해야 안전하다
- 큐 크기를 다리 길이로 유지 → 전진은 `poll()`, 진입은 `add()`
- 트럭 못 들어가면 0을 넣어 “시간만 흐르게” 한다
- 종료 조건: (다리에 올릴 트럭 없음) && (다리 위 트럭 없음)
